<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>狂客·银河 - 探索你的星辰大海</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* AI前沿按钮专属样式 */
        .ai-nav-button {
            display: flex;
            align-items: center;
            padding: 10px 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
            font-weight: 600;
        }
        .ai-nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }
        .ai-nav-button:hover::before {
            left: 100%;
        }
        .ai-nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }
        .ai-nav-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }
        .ai-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            margin-right: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        .ai-nav-button:hover .ai-icon {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        .ai-text {
            font-size: 14px;
            letter-spacing: 0.5px;
        }
        /* 为AI按钮添加呼吸动画效果 */
        @keyframes ai-glow {
            0%, 100% { box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3); }
            50% { box-shadow: 0 4px 20px rgba(102, 126, 234, 0.6); }
        }
        .ai-nav-button {
            animation: ai-glow 3s ease-in-out infinite;
        }
        /* 统一图标大小和颜色 */
        .success-icon, .sky-icon, .ai-icon, .exam-icon {
            color: #fff; /* 确保图标颜色在按钮背景上可见 */
            font-size: 16px; /* 统一图标大小 */
        }
        
        /* 添加加载状态样式 */
        .loading-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            color: var(--text-secondary, #666);
        }
        .loading-spinner::after {
            content: '';
            width: 24px;
            height: 24px;
            margin-left: 12px;
            border: 4px solid #e5e7eb;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .no-results {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary, #666);
            font-size: 1.1rem;
        }
        
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .notification {
            background: #3b82f6;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            animation: notificationSlideIn 0.3s ease-out;
            max-width: 300px;
            word-break: break-word;
        }
        
        .notification-success { background: #10b981; }
        .notification-warning { background: #f59e0b; }
        .notification-error { background: #ef4444; }
        
        @keyframes notificationSlideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .notification-close {
            background: none;
            border: none;
            color: inherit;
            cursor: pointer;
            opacity: 0.7;
            padding: 4px;
            border-radius: 4px;
            transition: opacity 0.2s;
        }
        
        .notification-close:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body data-page="moments">
    <!-- Firebase SDK（放在其他脚本之前） -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <!-- Firebase 配置 -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD9NwlJxYiRjFh3cPjpJGmQAhogmrFpU4M",
            authDomain: "kuangke-galaxy.firebaseapp.com",
            projectId: "kuangke-galaxy",
            storageBucket: "kuangke-galaxy.firebasestorage.app",
            messagingSenderId: "416862048915",
            appId: "1:416862048915:web:6578fcd23d8cf882c53366",
            measurementId: "G-VZCQM1H4BR"
        };
        // 初始化 Firebase
        firebase.initializeApp(firebaseConfig);
        console.log('Firebase 初始化成功！');
    </script>
    
    <!-- 添加默认数据 -->
    <script>
        // 确保有默认的朋友圈数据
        window.momentsData = [
            {
                id: 'moment_1',
                avatar: 'https://picsum.photos/seed/avatar1/100/100.jpg',
                username: '狂客同学',
                time: '2025-01-15 10:30:00',
                content: '今天学习了新的AI技术，感觉收获满满！继续加油💪',
                images: ['https://picsum.photos/seed/ai1/300/200.jpg'],
                likes: 42,
                comments: [
                    { id: 'c1', text: '太棒了！', timestamp: Date.now() - 3600000, author: '小明' }
                ],
                category: '学习成长'
            },
            {
                id: 'moment_2',
                avatar: 'https://picsum.photos/seed/avatar2/100/100.jpg',
                username: '星空探索者',
                time: '2025-01-14 15:45:00',
                content: '分享一个很棒的学习方法：番茄工作法真的能提高效率！',
                images: ['https://picsum.photos/seed/study1/300/200.jpg'],
                likes: 28,
                comments: [],
                category: '学习成长'
            },
            {
                id: 'moment_3',
                avatar: 'https://picsum.photos/seed/avatar3/100/100.jpg',
                username: '美食达人',
                time: '2025-01-13 18:20:00',
                content: '今天尝试了新的食谱，味道超赞！🍜',
                images: ['https://picsum.photos/seed/food1/300/200.jpg', 'https://picsum.photos/seed/food2/300/200.jpg'],
                likes: 35,
                comments: [],
                category: '美食分享'
            }
        ];
    </script>
    
    <header class="header">
        <div class="container">
            <div class="header-left">
                <h1 class="logo">狂客·银河</h1>
                <nav class="main-nav">
                    <a class="success-link" href="success.html">
                        <span class="success-icon">
                            <i class="fas fa-meteor"></i>
                        </span>
                        <span class="success-text">成功日记</span>
                    </a>
                    <a class="sky-link" href="reading.html">
                        <span class="sky-icon">
                            <i class="fas fa-star"></i>
                        </span>
                        <span class="sky-text">星空</span>
                    </a>
                    <a class="ai-nav-button" href="ai.html">
                        <span class="ai-icon">
                            <i class="fas fa-robot"></i>
                        </span>
                        <span class="ai-text">AI前沿</span>
                    </a>
                    <a class="exam-link" href="exam.html">
                        <span class="exam-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </span>
                        <span class="exam-text">考试相关</span>
                    </a>
                </nav>
            </div>
            <div class="controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="搜索银河中...">
                </div>
                <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>
    <nav class="category-nav">
        <div class="container">
            <div class="category-scroll">
                <button class="category-btn active" data-category="all">全部</button>
                <button class="category-btn" data-category="生活日常">生活日常</button>
                <button class="category-btn" data-category="美食分享">美食分享</button>
                <button class="category-btn" data-category="旅行见闻">旅行见闻</button>
                <button class="category-btn" data-category="工作相关">工作相关</button>
                <button class="category-btn" data-category="学习成长">学习成长</button>
                <button class="category-btn" data-category="健身运动">健身运动</button>
                <button class="category-btn" data-category="时尚穿搭">时尚穿搭</button>
                <button class="category-btn" data-category="艺术文化">艺术文化</button>
                <button class="category-btn" data-category="情感表达">情感表达</button>
                <button class="category-btn" data-category="节日纪念">节日纪念</button>
                <button class="category-btn" data-category="公益环保">公益环保</button>
                <button class="category-btn" data-category="科技数码">科技数码</button>
                <button class="category-btn" data-category="财经理财">财经理财</button>
                <button class="category-btn" data-category="幽默段子">幽默段子</button>
                <button class="category-btn" data-category="问答互动">问答互动</button>
            </div>
        </div>
    </nav>
    <main class="main-content">
        <div class="container">
            <div id="momentsContainer" class="moments-grid">
                <!-- 动态加载的内容将在这里显示 -->
            </div>
        </div>
    </main>
    <footer class="social-footer">
        <div class="container">
            <div class="social-links">
                <a href="https://open.weixin.qq.com/qr/code?username=gh_ba5b6bb6bd89"
                   target="_blank" class="social-link wechat" title="微信公众号" rel="noopener noreferrer">
                    <i class="fab fa-weixin"></i>
                </a>
                <a href="https://github.com/kuangketongxue" target="_blank" class="social-link github" title="GitHub" rel="noopener noreferrer">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://x.com/kuangketongxue" target="_blank" class="social-link x" title="X (前 Twitter)" rel="noopener noreferrer">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </a>
            </div>
            <p class="copyright">© 2025 狂客·银河 版权所有</p>
        </div>
    </footer>
    <div id="commentModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="commentModalTitle">
        <div class="modal-content">
            <span class="close" aria-label="关闭评论弹窗">&times;</span>
            <h2 id="commentModalTitle">评论</h2>
            <div id="commentsList" class="comments-list">
                <!-- 评论将在这里动态加载 -->
            </div>
            <div class="comment-input-area">
                <label for="commentInput" class="sr-only">输入你的评论</label>
                <input type="text" id="commentInput" placeholder="写下你的评论..." aria-label="评论输入框">
                <button id="submitComment">发送</button>
            </div>
        </div>
    </div>
    <!-- 项目脚本 -->
    <script src="data.js"></script>
    <script src="firebase-handler.js"></script>
    <script src="script.js"></script>
</body>
</html>
