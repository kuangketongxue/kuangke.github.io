<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>成功日记 | 狂客·银河</title>
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome with fallback -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
          onerror="this.onerror=null;this.href='css/fontawesome-fallback.css';">
</head>
<body data-page="success">
    <!-- 背景装饰 -->
    <div class="bg-decoration">
        <div class="circle circle-1"></div>
        <div class="circle circle-2"></div>
        <div class="circle circle-3"></div>
    </div>
    
    <header class="header">
        <div class="container success-header">
            <div class="header-left">
                <a class="back-link" href="index.html" aria-label="返回首页">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <div class="header-text">
                    <div class="title-wrapper">
                        <i class="fas fa-book-open title-icon"></i>
                        <h1 class="logo" data-i18n="successTitle">成功日记时间轴</h1>
                    </div>
                    <p class="success-subtitle" data-i18n="successSubtitle">
                        <i class="fas fa-quote-left quote-icon"></i>
                        当你写成功日记的时候，你会对自己，对世界，还有对成功的规律作更深入的思考，会越来越多地了解自己和自己的愿望，这样你才会有能力去理解别人。彻底了解自己和世界上的所有秘密，是我们无法完全实现的一种理想，但我们可以一步一步地慢慢接近这种理想。一个人挣钱的多少是和他的自信心联系在一起的。另外,他的精力究竟是集中在自己的能力范围之内,还是放到了他力所不能及的事情上,这也是很重要的一点。没有我的成功日记本,我就不会去思考自己适合在哪些方面赚钱。
                        <i class="fas fa-quote-right quote-icon"></i>
                    </p>
                </div>
            </div>
            <div class="controls success-controls">
                <div class="search-box diary-search">
                    <i class="fas fa-search"></i>
                    <input type="text" id="diarySearchInput" placeholder="搜索标题、标签、心情..." aria-label="搜索日记">
                    <button class="search-clear" id="searchClear" style="display: none;" aria-label="清除搜索">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <button id="languageToggle" class="language-toggle" aria-label="切换语言">
                    <i class="fas fa-language"></i>
                    <span>中 → EN</span>
                </button>
                <button id="themeToggle" class="theme-toggle" aria-label="切换主题">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>
    
    <section class="diary-toolbar" role="region" aria-label="日记筛选工具栏">
        <div class="container diary-toolbar-inner">
            <div class="filter-group">
                <div class="filter-header">
                    <i class="fas fa-tags"></i>
                    <span class="filter-title" data-i18n="tagLabel">分类标签</span>
                </div>
                <div id="diaryTagFilter" class="filter-chips" role="group" aria-label="标签筛选"></div>
            </div>
            <div class="filter-row">
                <div class="filter-item">
                    <i class="fas fa-smile"></i>
                    <label class="filter-label" data-i18n="moodLabel" for="diaryMoodSelect">心情</label>
                    <select id="diaryMoodSelect" class="filter-select" aria-label="选择心情筛选">
                        <option value="all">全部心情</option>
                    </select>
                </div>
                <div class="filter-item">
                    <i class="fas fa-sort"></i>
                    <label class="filter-label" data-i18n="sortLabel" for="diarySortSelect">排序</label>
                    <select id="diarySortSelect" class="filter-select" aria-label="选择排序方式">
                        <option value="dateDesc">📅 日期：最新优先</option>
                        <option value="dateAsc">📅 日期：最旧优先</option>
                        <option value="achievementDesc">🏆 成就值：最高优先</option>
                        <option value="achievementAsc">🏆 成就值：最低优先</option>
                    </select>
                </div>
                <button id="diaryResetFilters" class="ghost-btn reset-btn" data-i18n="resetFilters" aria-label="重置所有筛选条件">
                    <i class="fas fa-redo"></i>
                    <span>重置筛选</span>
                </button>
            </div>
        </div>
    </section>
    
    <main class="main-content success-main">
        <div class="container">
            <div class="stats-bar">
                <div class="diary-counter" id="diaryCounter">
                    <i class="fas fa-chart-line"></i>
                    <span>共 <strong>0</strong> 条记录</span>
                </div>
                <div class="view-toggle" role="group" aria-label="切换视图">
                    <button class="view-btn active" data-view="timeline" aria-label="时间轴视图" aria-pressed="true">
                        <i class="fas fa-stream"></i>
                    </button>
                    <button class="view-btn" data-view="grid" aria-label="网格视图" aria-pressed="false">
                        <i class="fas fa-th"></i>
                    </button>
                </div>
            </div>
            
            <div id="diaryTimeline" class="timeline"></div>
            
            <!-- 空状态 -->
            <div class="empty-state hidden">
                <i class="fas fa-search empty-icon"></i>
                <h3>未找到匹配的记录</h3>
                <p>试试调整筛选条件或搜索关键词</p>
            </div>
        </div>
    </main>
    
    <!-- 返回顶部按钮 -->
    <button id="backToTop" class="back-to-top" aria-label="返回顶部">
        <i class="fas fa-arrow-up"></i>
    </button>
    
    <script src="data.js" ></script>
    <script src="script.js" ></script>
</body>
</html>
// 渲染单个日记卡片
function renderDiaryCard(diary, lang) {
    const currentLang = lang || getCurrentLanguage();
    const moodInfo = getMoodInfo(diary.moodCode, currentLang);
    
    return `
        <div class="timeline-item" data-id="${diary.id}">
            <div class="timeline-marker"></div>
            <div class="timeline-card">
                <div class="diary-card-body">
                    ${diary.coverImage ? `
                        <img src="${diary.coverImage}" 
                             alt="${diary.headline[currentLang]}" 
                             class="diary-cover">
                    ` : ''}
                    
                    <div class="diary-card-content" data-lang="${currentLang}">
                        <div class="diary-card-header" data-lang="${currentLang}">
                            <h2 class="diary-title" data-lang="${currentLang}">
                                ${diary.headline[currentLang]}
                            </h2>
                            <div class="diary-date">
                                <i class="fas fa-calendar-alt"></i>
                                ${formatDate(diary.date, currentLang)}
                            </div>
                        </div>
                        
                        <div class="diary-text" data-lang="${currentLang}">
                            ${formatContent(diary.content[currentLang])}
                        </div>
                        
                        ${diary.highlight && diary.highlight[currentLang] ? `
                            <div class="diary-highlight" data-lang="${currentLang}">
                                <strong class="meta-title">
                                    ${currentLang === 'zh' ? '小结:' : 'Highlight:'}
                                </strong>
                                <span class="highlight-content">${diary.highlight[currentLang]}</span>
                            </div>
                        ` : ''}
                        
                        ${diary.notes && diary.notes[currentLang] ? `
                            <div class="diary-notes" data-lang="${currentLang}">
                                <strong class="meta-title">
                                    ${currentLang === 'zh' ? '备注:' : 'Notes:'}
                                </strong>
                                <p>${diary.notes[currentLang]}</p>
                            </div>
                        ` : ''}
                        
                        <div class="diary-meta">
                            <div>
                                <span class="meta-title">
                                    ${currentLang === 'zh' ? '标签:' : 'Tags:'}
                                </span>
                                <span class="meta-content">
                                    ${diary.categories.map(cat => 
                                        `<span class="tag-pill">${getTagName(cat, currentLang)}</span>`
                                    ).join('')}
                                </span>
                            </div>
                            
                            <div>
                                <span class="meta-title">
                                    ${currentLang === 'zh' ? '心情:' : 'Mood:'}
                                </span>
                                <span class="meta-content">
                                    <span class="mood-badge" style="color: ${moodInfo.color}; border-color: ${moodInfo.color};">
                                        ${moodInfo.emoji} ${moodInfo.text}
                                    </span>
                                </span>
                            </div>
                            
                            <div>
                                <span class="meta-title">
                                    ${currentLang === 'zh' ? '成就:' : 'Achievement:'}
                                </span>
                                <span class="meta-content">
                                    <span class="achievement-badge">
                                        ${'★'.repeat(diary.achievementLevel)}${'☆'.repeat(5 - diary.achievementLevel)}
                                    </span>
                                </span>
                            </div>
                        </div>
                        
                        ${diary.attachments && diary.attachments.length > 0 ? `
                            <div class="diary-attachments">
                                <span class="meta-title">
                                    ${currentLang === 'zh' ? '附件:' : 'Attachments:'}
                                </span>
                                ${diary.attachments.map(att => 
                                    att.type === 'image' 
                                        ? `<img src="${att.url}" alt="${att.name}" class="diary-attachment">`
                                        : `<a href="${att.url}" class="diary-attachment-link" target="_blank">
                                            <i class="fas fa-paperclip"></i> ${att.name}
                                           </a>`
                                ).join('')}
                            </div>
                        ` : ''}
                    </div>
                </div>
            </div>
        </div>
    `;
}

// 格式化内容(保持换行)
function formatContent(content) {
    if (!content) return '';
    return content.split('\n').map(line => 
        line.trim() ? `<p>${line}</p>` : ''
    ).join('');
}

// 切换语言时重新渲染
function switchLanguage() {
    const newLang = getCurrentLanguage() === 'zh' ? 'en' : 'zh';
    setCurrentLanguage(newLang);
    
    // 更新按钮文本
    const langBtn = document.querySelector('.language-toggle');
    if (langBtn) {
        langBtn.innerHTML = `
            <i class="fas fa-language"></i>
            <span>${newLang === 'zh' ? '中 → EN' : 'EN → 中'}</span>
        `;
    }
    
    // 重新渲染所有内容
    renderAllDiaries();
}

// 获取当前语言
function getCurrentLanguage() {
    return localStorage.getItem('language') || 'zh';
}

// 设置当前语言
function setCurrentLanguage(lang) {
    localStorage.setItem('language', lang);
}

// 渲染所有日记
function renderAllDiaries() {
    const currentLang = getCurrentLanguage();
    const timeline = document.querySelector('.timeline');
    
    if (!timeline) return;
    
    const filteredDiaries = getFilteredDiaries();
    
    if (filteredDiaries.length === 0) {
        timeline.innerHTML = `
            <div class="diary-empty">
                <div class="empty-icon">📝</div>
                <h3>${currentLang === 'zh' ? '暂无日记' : 'No Diaries Yet'}</h3>
                <p>${currentLang === 'zh' ? '开始记录你的成功时刻吧!' : 'Start recording your success moments!'}</p>
            </div>
        `;
        return;
    }
    
    timeline.innerHTML = filteredDiaries
        .map(diary => renderDiaryCard(diary, currentLang))
        .join('');
}

// 页面加载时初始化
document.addEventListener('DOMContentLoaded', function() {
    // 设置初始语言
    const currentLang = getCurrentLanguage();
    
    // 渲染日记
    renderAllDiaries();
    
    // 绑定语言切换按钮
    const langBtn = document.querySelector('.language-toggle');
    if (langBtn) {
        langBtn.addEventListener('click', switchLanguage);
    }
});
